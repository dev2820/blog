---
title: "휴고 연관성 있는 컨텐츠"
date: 2020-09-27T16:35:32+09:00
categories: ["what_is_hugo"]
tags: ["hugo","휴고","연관성 있는 컨텐츠"]
cover: ""
draft: false
---

이건 여담인데 여러분 이거 읽다보면 아니 그래서 어떻게 단다는 거야 처음부터 따라가는데 하나도 모르겠고 자꾸 헛소리만하네 같은 생각이 들 수 있는데 네! 저도 같은 생각입니다! 휴고에서 알려주는 순서대로 따라가면 얼추 혼자서 블로그도 만들고 팅팅탱탱후라이팬놀이 할줄 알았는데 아니었습니다. 껄껄껄

그래서 이 컨텐츠는 적당히 필요한 휴고의 기능들, 휴고의 구요등을 설명하는 컨텐츠로 두고 따로 다음에 휴고로 블로그 개설하는 컨텐츠를 진행하겠습니다. 순 서대로 밟아가며 따라갈 수 있는 컨텐츠로요.

## Related Content
블로그 글 다읽고 하단에 보면 비슷한 글 더보기, 다른 컨텐츠 보기 등등 나오죠? 그거 휴고에서 어떻게 만드는지 관한 글입니다.

휴고에서는 각 컨텐츠의 front matter 를 기반으로 다른 페이지와의 관련성 찾습니다.

### List Related Content
아래는 5개의 관련있는 페이지를 나열하는 `related.html` 템플릿 예시입니다. `single page template` 맨 아래 포함시키면 되겠군요.

layouts/partials/related.html
```html
{{ $related := .Site.RegularPages.Related . | first 5 }}
{{ with $related }}
<h3>See Also</h3>
<ul>
	{{ range . }}
	<li><a href="{{ .RelPermalink }}">{{ .Title }}</a></li>
	{{ end }}
</ul>
{{ end }}
```

위에서부터 간단히 설명을 해보면
$related에 `.Site.RegularPages.Related . | first 5`를 저장합니다. `.Related`는 `.RegularPages`가 제공하는 메소드입니다. `.Related` 뒤에 붙는 `.`은 현재 페이지를 의미하고 저 .Related 메소드에 집어넣고있는 겁니다. 즉 파라미터죠. `| first 5`는 필터입니다. `.Related`가 알아서 연관성 있는 페이지 배열을 `.RegularPages` 중에 골라 반환합니다. 필터는 그 반환된 배열의 앞에서 5개를 가져오는 역할을 합니다. 

`{{with $related}}`는 `{{end}}`를 만날때까지 `.`를 `$related`로 바꿔줍니다. 저 with 블록을 벗어나면 `.`은 다시 현재 페이지를 가리키는 것으로 바뀌겠죠?

### Methods

여기 나오는 메소드들은 .RegularPages 가 제공하는 Related 종류의 메소드 들입니다.

**.Related PAGE**  
파라미터로 페이지를 집어넣으면 집어넣은 페이지와 관련있는 페이지배열을 반환합니다.
```go
{{ $related := .Site.RegularPages.Related . }}
```

**.RelatedIndices PAGE INDICE1 [INDICE2 ... ]**  
파라미터로 집어넣은 PAGE의 front matter 값중 INDICE1,INDICE2 등등의 front matter 값만 가지고 연관있는 페이지를 찾아 반환해줍니다.

```go
{{ $related := .Site.RegularPages.RelatedIndices . "tags" "date" }}
```

**.RelatedTo KEYVALS [KEYVALS2 ...]**  
해당 front matter가 일치하는 페이지 배열을 만듭니다. `KeyVals` 함수에 첫번째 파라미터로 front matter값을, 나머지 파라미터로는 찾을 값들을 입력하면 값이 일치하는 페이지를 찾아줍니다. 

```go
{{ $related := .Site.RegularPages.RelatedTo (keyVals "tags" "hugo" "rocks") (keyVals "date" .Date)}}
```

위 예시는 모든 RegularPages의 페이지중 front matter의 "tags"가 "hugo" 또는 "rocks"이고 "date"가 오늘 날짜인 글들을 찾는 예시입니다.

### Configure Related Content

Related 관련 설정 부분입니다.

default 설정은 다음과 같습니다.
```toml
# config.toml
[related]
  includeNewer = false
  threshold = 80
  toLower = false

  [[related.indices]]
    name = "keywords"
    weight = 100

  [[related.indices]]
    name = "date"
    weight = 10
```
사용 가능한 옵션들을 살펴봅시다. 우선은 `[related]` 네임스페이스 바로 아래 쓰는 옵션들입니다.
**threshold**  
0-100 사이의 값을 줄 수 있습니다. 값이 높을 수록 연관도가 높은 글들이 모이지만 그만큼 모이는 글이 적어지고 값이 낮을 수록 연관도는 적지만 관련 글은 많아집니다.

**includeNewer**  
true로 설정하면 연관있는 페이지 배열에 현재 페이지보다 최근에 작성된 글들이 포함됩니다. 

**toLower**  
대소문자 구분 없이 연관도를 비교합니다. 구지 여기서 true/false를 정하지 않아도 관련성 검사에 사용할 front matter 요소마다 대소문자를 구분할지 정할 수 있습니다.

`[related]` 네임스페이스 아래 들어가는 각 index 별 옵션들입니다. 

**name**  
어떤 front matter 값에 대한 옵션인지 이름을 쓰는 곳입니다.
 
**weight**  
관련성 검사에서 얼마나 중요한지 중요도를 설정하는 곳입니다. 0으로도 설정할 수 있는데, 0이면 해당 index는 관련성 검사에 영향을 주지 않게 됩니다. 

**pattern**  
관련있는 글은 작성된 일자가 비슷한 글들이 뽑히는데 "2006"으로 pattern을 정하게 되면 년도만 비교하여 관련있는지 판단합니다. "200601" 이런식으로 값을 주면 년도와 달까지 비교해 연관있는 글로 판단합니다.

**toLower**  
대소문자를 구분할지 정해주는 옵션입니다. true/false값을 줄 수 있습니다.

## 마치며
연관성 있는 글을 수집하는 것은 위에 나온 메소드 말고 직접 구현할 수도 있습니다.  하지만 구지 그러지 않는 것을 추천합니다. 쓸대없는 개발기간만 늘리거든요. 다음글은 컨텐츠의 front matter 값에 대해 알아보겠습니다.