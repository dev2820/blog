{{ define "header" }}
{{ if .Params.cover }}
{{ with .Resources.GetMatch (string .Params.cover) }}
  {{ $image := . }}
  {{ $width := (div (mul 450 $image.Width) $image.Height) }}
  {{ $ts := slice $width "450" }}
  {{ $ts := string (delimit $ts "x") }}
  {{ $ts := slice $ts "smart" }}
  {{ $ts := string (delimit $ts " ") }}
  {{ $image := $image.Fill $ts }}
  <header id="single-header" style="background-image:url({{ $image.RelPermalink }});">
{{ end }}
{{ else }}
<header id="single-header" style="background-image:url({{"/images/default_banner.jpg"}});">
{{ end }}
  <div class="title">
    <h1 id="title" class="appear-300ms">{{ .Title }}</h1>
    <section class="appear-700ms">
      <p id="date"> {{ i18n "postDatetime" .Date }} </p>
      <p id="wordcount"> {{ .ReadingTime }} <i class="far fa-clock"></i>  </p>
    </section>
    {{ partial "breadcrumb.html" .}}
    {{ $author := .Site.Author.name }}
    {{with .Site.GetPage "/about"}}
    <p class="author appear-1000ms">by <a href="{{.Permalink}}">{{ $author }}</a></p>
    {{end}}
  </div>
</header>
{{ end }}
{{ define "main" }}
<main id="single-main">
  <section id="content">
    <div class="left">
      <!--좌측 공간 만들기용 div-->
    </div>
    <div class="center appear-1200ms">
      <div>
            <article class="content">
              {{ .Content }}
            </article>
      </div>
    </div>
    <div class="right">
      {{ partial "table_of_content.html" .}}    
    </div>
  </section>
  <aside id="meta">
    <div class="center">
      {{ partial "section-move.html" . }}
      {{ with .Params.topics }}
      <ul id="topics">
        {{ range . }}
          <li><a href="{{ "topics" | absURL}}{{ . | urlize }}">{{ . }}</a> </li>
        {{ end }}
      </ul>
      {{ end }}
      {{ partial "tag_list.html" . }}
      {{ partial "profile-in-article.html" . }}
      {{ partial "relate-content.html" . }}
      {{ template "_internal/disqus.html" . }}
    </div>
  </aside>
</main>
<script src="/js/cardClassControl.js"></script>
{{ end }}