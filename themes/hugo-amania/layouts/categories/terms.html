{{ define "main" }}
<div class="categories">
  <h1 class="title">{{ i18n "categoriesTitle" }}</h1>
  <p class="description">{{ i18n "categoriesDescription" }}</p>
  <ul>
    {{ $baseurl := .Site.BaseURL }}
    {{ $data := .Data }}
    {{ $site := .Site }}
    {{ range $key,$value := .Data.Terms.Alphabetical }}
    <li onclick="goToUrl('{{ $baseurl }}{{ $data.Plural }}/{{ $value.Name | urlize }}')">
      <span class="summary card">
        {{ range first 1 $value.WeightedPages }}
          {{ if .Params.cover }}
          <div class="recent-image" style="background-image:url({{.Params.cover | relURL }})">
          {{ else }}
          <div class="recent-image" style="background-image:url({{"/images/ocean.jpg" | relURL}})">
          {{ end }}
          <a href="{{ .Permalink }}">
            <span>{{ .Date.Format "2006-01-02" }}</span>
          </a>
          </div>
        {{ end }}
        <div class="title">
          <a href="{{ $baseurl }}{{ $data.Plural }}/{{ $value.Name | urlize }}">
            <h3>{{ $value.Name }}</h3> 
            <div>{{ $value.Count }} {{ i18n "categoriesCount" }}</div>
          </a>
        </div>
      </span>
    </li>
    <div class="subcategories">
      {{ $list := ( index $site.Data.config.subCategoryList $value.Name ) }}
      <ul>
      {{ range $key, $value := $site.Taxonomies.subcategories.Alphabetical }}
      {{ if in $list $value.Name }}
        <li>
          <a href="{{ $baseurl }}subcategories/{{ $value.Name | urlize }}">
            <i class="fa fa-angle-right icon" aria-hidden="true"></i>
            {{ humanize $value.Name }}
            <div class="count">{{ $value.Count }} posts</div>
          </a>
        </li>
      {{ end }}
      {{ end }}
      </ul>
    </div>
    {{ end }}
  </ul>
</div>
{{ end }}